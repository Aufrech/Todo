Chapter 15: Move code to controllers